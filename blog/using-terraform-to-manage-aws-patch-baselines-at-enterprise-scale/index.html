<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><script async defer data-domain=jdheyburn.co.uk src=https://stats.jdheyburn.co.uk/js/index.js></script><meta name=author content="Joseph D. Heyburn"><meta name=description content="Ramblings of a tech guy"><meta name=keywords content="blog,developer,devops,cloud"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://jdheyburn.co.uk/blog/using-terraform-to-manage-aws-patch-baselines-at-enterprise-scale/card.png"><meta name=twitter:title content="Using Terraform to Manage AWS Patch Baselines at Enterprise Scale"><meta name=twitter:description content="I discuss an enhancement I made to terraform-aws-provider enabling enterprises to effectively manage patch baselines in AWS with Terraform"><meta property="og:title" content="Using Terraform to Manage AWS Patch Baselines at Enterprise Scale"><meta property="og:description" content="I discuss an enhancement I made to terraform-aws-provider enabling enterprises to effectively manage patch baselines in AWS with Terraform"><meta property="og:type" content="article"><meta property="og:url" content="https://jdheyburn.co.uk/blog/using-terraform-to-manage-aws-patch-baselines-at-enterprise-scale/"><meta property="og:image" content="https://jdheyburn.co.uk/blog/using-terraform-to-manage-aws-patch-baselines-at-enterprise-scale/card.png"><meta property="article:published_time" content="2020-07-02T00:00:00+00:00"><meta property="article:modified_time" content="2020-07-02T00:00:00+00:00"><base href=https://jdheyburn.co.uk/blog/using-terraform-to-manage-aws-patch-baselines-at-enterprise-scale/><title>Using Terraform to Manage AWS Patch Baselines at Enterprise Scale ¬∑ JDHeyburn</title><link rel=canonical href=https://jdheyburn.co.uk/blog/using-terraform-to-manage-aws-patch-baselines-at-enterprise-scale/><link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700&display=swap" rel=stylesheet><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.13.0/css/all.css integrity=sha384-Bfad6CLCknfcloXFOyFnlgtENryhrpZCe29RTifKEixXQZ38WheV+i/6YWSzkz3V crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin=anonymous><link rel=stylesheet href=https://jdheyburn.co.uk/css/coder.min.f01c647a0d25b40da992a37c3376291185eed8a50ced8c26cc2c0bcfe38c97df.css integrity="sha256-8Bxkeg0ltA2pkqN8M3YpEYXu2KUM7YwmzCwLz+OMl98=" crossorigin=anonymous media=screen><link rel=stylesheet href=https://jdheyburn.co.uk/css/coder-dark.min.126ad3988d46bdae6217a11105b53c9662bca05f39d42d3c0fb366919d334620.css integrity="sha256-EmrTmI1Gva5iF6ERBbU8lmK8oF851C08D7NmkZ0zRiA=" crossorigin=anonymous media=screen><link rel=stylesheet href=https://jdheyburn.co.uk/css/custom.css><link rel=icon type=image/png href=https://jdheyburn.co.uk/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://jdheyburn.co.uk/images/favicon-16x16.png sizes=16x16><meta name=generator content="Hugo 0.104.3"></head><body class=colorscheme-dark><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://jdheyburn.co.uk/>JDHeyburn</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=https://jdheyburn.co.uk/about/>About</a></li><li class=navigation-item><a class=navigation-link href=https://jdheyburn.co.uk/blog/>Blog</a></li><li class=navigation-item><a class=navigation-link href=https://jdheyburn.co.uk/projects/>Projects</a></li><li class=navigation-item><a class=navigation-link href=https://jdheyburn.co.uk/contact/>Contact</a></li></ul></section></nav><div class=content><section class="container post"><article><div><img class=featimage src=https://jdheyburn.co.uk/blog/using-terraform-to-manage-aws-patch-baselines-at-enterprise-scale/cover.png alt="Featured image"></div><header><div class=post-title><h1 class=title>Using Terraform to Manage AWS Patch Baselines at Enterprise Scale</h1></div><div class=post-description><p>I discuss an enhancement I made to terraform-aws-provider enabling enterprises to effectively manage patch baselines in AWS with Terraform</p></div><div class=post-meta><div class=date><span class=posted-on><i class="fas fa-calendar"></i>
<time datetime=2020-07-02T00:00:00Z>2 July 2020</time></span>
<span class=reading-time><i class="fas fa-clock"></i>
8-minute read</span></div></div></header><div><aside><nav id=TableOfContents><ul><li><a href=#aws-primer->AWS Primer ‚òÅÔ∏è</a><ul><li><a href=#ec2>EC2</a></li><li><a href=#ssm--patch-manager>SSM & Patch Manager</a></li></ul></li><li><a href=#infrastructure-as-code-primer>Infrastructure as Code Primer</a></li><li><a href=#patch-baselines-in-an-enterprise-environment>Patch Baselines in an Enterprise Environment</a><ul><li><a href=#data-sources-for-patch-baselines>Data Sources For Patch Baselines</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></aside><p>If you‚Äôre new to AWS and patching principles then continue reading, else you can <a href=#data-sources-for-patch-baselines>skip to juicy stuff below</a>.</p><h2 id=aws-primer->AWS Primer ‚òÅÔ∏è</h2><h3 id=ec2>EC2</h3><p>Amazon Web Services (AWS) provides Cloud resources to those that require it, <a href=https://www.lastweekinaws.com/blog/4-reasons-lyft-is-smart-to-pay-aws-300m/>for a cost</a> mind you. One resource in particular is a box-standard server known on AWS as <a href=https://aws.amazon.com/ec2/>EC2 Instances</a> which you can secure shell (<a href=https://www.ssh.com/ssh/>SSH</a>) into and do whatever you like with it - the world is now officially your oyster! ü¶™</p><p>Just like with your personal laptop, computer, mobile phone, etc., you need to patch your servers with the latest security updates to ensure that you are protected from any adversary gaining access to your devices.</p><p>If they were to gain unauthorised access, they can execute whatever they like on there; whether that be sniffing around your network for some sensitive files, or <a href=https://www.cybersecurity-insiders.com/hackers-cyber-attack-amazon-cloud-to-mine-bitcoins/>mining cryptocurrency</a> on your paid-for resources. Just like you earlier - your world is now officially <em>their</em> oyster!</p><p>EC2 instances are operated by you, and as per the <a href=https://aws.amazon.com/compliance/shared-responsibility-model/>AWS Shared Responsibility Model</a>, <em>you</em> are responsible for ensuring the software is kept secured.</p><h3 id=ssm--patch-manager>SSM & Patch Manager</h3><p>AWS have a service used to help with the administration of EC2 instances called <a href=https://aws.amazon.com/systems-manager/>Systems Manager (SSM*)</a>. SSM is a bit of a beast and covers a lot of different functionalitie, going deep on SSM is beyond the scope of this article - so you can read more about it on the <a href=https://docs.aws.amazon.com/systems-manager/latest/userguide/what-is-systems-manager.html>AWS documentation</a>.</p><blockquote><p>* SSM formerly was an acronym for Simple Systems Manager - I guess it got more complex than they thought!</p></blockquote><p>To help you keep your instances patched, AWS provided the <a href=https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-patch.html>Patch Manager</a> - within there it contains a number of tools to help with this. These are:</p><ul><li><a href=https://docs.aws.amazon.com/systems-manager/latest/userguide/about-patch-baselines.html><strong>Patch Baselines</strong></a><ul><li>a policy which filters available patches for your instances to what should be installed on it</li><li>filters which you can apply to a baseline include<ul><li>how many days since the patch was released</li><li>the severity and classification of the patch</li><li>or even explicitly deny individual patches if you know they introduce a bug</li></ul></li><li>e.g. only install security classified patches marked as critical severity which have been released more than 7 days ago</li></ul></li><li><a href=https://docs.aws.amazon.com/systems-manager/latest/userguide/sysman-patch-patchgroups.html><strong>Patch Groups</strong></a><ul><li>a label which joins together patch baselines, to what instances they should be applied to</li><li>they apply to instances as a tag at a key named <code>Patch Group</code></li></ul></li></ul><p>To then perform a patch event on an instance, you will need to execute an SSM Document known as <strong>AWS-RunPatchBaseline</strong> on your target instances.</p><blockquote><p>An <a href=https://docs.aws.amazon.com/systems-manager/latest/userguide/sysman-ssm-docs.html>SSM Document</a> is essentially an automation script that you can perform on one or more instances at a time, with conditions to apply different sets of scripts depending on the operating system (OS) platform (i.e. Windows / Linux).</p></blockquote><p><strong>AWS-RunPatchBaseline</strong> is one such example of a document that has both Windows and Linux stages, and it will check and install patches against the patch baseline that has been applied to your instance, via a patch group.</p><blockquote><p>However if an EC2 instance is not assigned to a patch group, then AWS will pick the <strong>default baseline</strong> for that instances operating system</p></blockquote><p>Say you had a security policy of ensuring instances must check for patches once a week - there&rsquo;s no need to manually execute the SSM Document yourself. <a href=https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-maintenance.html>Maintenance Windows</a> can help with that. They are essentially a <a href=https://en.wikipedia.org/wiki/Cron#CRON_expression>cron expression</a> that you define to then execute a task. In this case we can create a maintenance window to execute the AWS-RunPatchBaseline document on a weekly basis.</p><p>The resulting relationship of all the above looks like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>Maintenance Windows ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ invokes ‚îÄ‚îÄ‚îÄ&gt; SSM Document ‚îÄ‚îÄ‚îÄ queries ‚îÄ‚îÄ‚îÄ&gt; Patch Baseline
</span></span><span style=display:flex><span>                      |
</span></span><span style=display:flex><span>                      |
</span></span><span style=display:flex><span>                      ‚îî‚îÄ‚îÄ targets ‚îÄ‚îÄ‚îÄ&gt; Patch Groups ‚îÄ‚îÄ‚îÄ assigned to ‚îÄ‚îÄ‚îÄ&gt; EC2 Instances
</span></span></code></pre></div><h2 id=infrastructure-as-code-primer>Infrastructure as Code Primer</h2><p>Creating your resources through a web UI such as AWS Console is okay for learning in. But how do you ensure your infrastructure is repeatable across several environments? Not only that, how do you easily keep a history of the state of your application infrastructure?</p><p>This is where <a href=https://en.wikipedia.org/wiki/Infrastructure_as_code>infrastructure as code</a> (IAC) comes in. IAC is where all your infrastructure resources are defined in code, and published onto a source code repository of your choosing (GitHub, GitLab, etc.).</p><p>That way you can ensure the code that defines your infrastructure can be repeated across your different application environments, and be able to view history of code changes.</p><p>It also acts as a single source of truth that everyone in your team can depend on for what the application state looks like.</p><p>There are several IAC tools that you can use:</p><ul><li><a href=https://aws.amazon.com/cloudformation/>CloudFormation</a> is AWS‚Äôs home-grown solution exclusively for AWS services</li><li>There are platform-agnostic tools such as <a href=https://www.terraform.io/>Terraform</a><ul><li>written in its own proprietary language HashiCorp Configuration Language (HCL)</li><li>I‚Äôve talked about Terraform before in a <a href=https://jdheyburn.co.uk/blog/on-becoming-an-open-source-software-contributor/#background>previous post</a></li></ul></li><li>Or for a language-agnostic, platform-agnostic tool - <a href=https://www.pulumi.com/why-pulumi/>Pulumi</a> is the one for you.</li></ul><p>In the case of Terraform, it keeps the current state of your infrastructure stack in a file stored in a shared remote location. This is known as the <a href=https://www.terraform.io/docs/state/index.html>state file</a>, and it is used by Terraform to understand what resources Terraform is aware of in your platform.</p><h2 id=patch-baselines-in-an-enterprise-environment>Patch Baselines in an Enterprise Environment</h2><p>When managing Terraform in an enterprise environment, it is a best practice to split up the infrastructure on the structure of the teams working on them, known as workspaces. This is something advised by <a href=https://www.terraform.io/docs/cloud/guides/recommended-practices/part1.html#the-recommended-terraform-workspace-structure>Terraform themselves</a>. For example, you would have a workspace for billing, and one for networking. That way you can ensure teams can work effectively without treading on each others&rsquo; toes.</p><p>The same principle can be applied to a security team that defines security policies, who will also write up patching policies. These policies will be followed by teams working in different workspaces to understand at minimum what patches should be installed on a server, and how quickly to install them.</p><blockquote><p>Check out the University of Exeter‚Äôs own <a href=https://www.exeter.ac.uk/media/level1/academicserviceswebsite/it/recordsmanagementservice/policydocuments/Patch_Management_Policy_FINAL.pdf>patching policy</a> for an example.</p></blockquote><p>For example, an enterprise may have a patching policy that states all patches with a severity marked as ‚ÄòCritical‚Äô or ‚ÄòImportant‚Äô must be installed within 14 days of its release. If an out-of-band (OOB) patch is released, then it must be installed within 3 days.</p><p>These folk are the same lot who will also conjure up the <strong>Patch Baselines</strong> we learned about earlier.</p><p>They may deploy these patch baselines in a different Terraform workspace from yours. If that were the case, then if you wanted to refer back to these in your Terraform workspace, then the <a href=https://www.terraform.io/docs/providers/terraform/d/remote_state.html><code>remote_state</code></a> resource is something you might need.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-hcl data-lang=hcl><span style=display:flex><span><span style=color:#6272a4># This example references a subnet_id created in another workspace
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span><span style=color:#ff79c6>data</span> <span style=color:#f1fa8c>&#34;terraform_remote_state&#34; &#34;vpc&#34;</span> {
</span></span><span style=display:flex><span>  backend <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;remote&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  config <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>    organization <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;hashicorp&#34;</span>
</span></span><span style=display:flex><span>    workspaces <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>      name <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;vpc-prod&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>resource</span> <span style=color:#f1fa8c>&#34;aws_instance&#34; &#34;foo&#34;</span> {<span style=color:#6272a4>
</span></span></span><span style=display:flex><span><span style=color:#6272a4>  # ...
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>  subnet_id <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>data</span>.<span style=color:#ff79c6>terraform_remote_state</span>.<span style=color:#ff79c6>vpc</span>.<span style=color:#ff79c6>outputs</span>.<span style=color:#ff79c6>subnet_id</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>So the above works if all parties are using Terraform workspaces. But what if you&rsquo;re using Terraform, and the security team (who are managing patch baselines) are using something different like the mentioned CloudFormation or Pulumi.</p><p>If you are creating <strong>patch groups</strong> in Terraform - you won‚Äôt be able to reference the <strong>patch baselines</strong> they‚Äôve created, because they are in a different state file.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-hcl data-lang=hcl><span style=display:flex><span><span style=color:#ff79c6>resource</span> <span style=color:#f1fa8c>&#34;aws_ssm_patch_group&#34; &#34;front_end_servers&#34;</span> {
</span></span><span style=display:flex><span>  baseline_id <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>aws_ssm_patch_baseline</span>.<span style=color:#ff79c6>front_end_servers</span>.<span style=color:#ff79c6>id</span><span style=color:#6272a4> # Terraform does not know about this resource!
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>  patch_group <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;front_end_servers&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>You could of course replicate the patch baseline they‚Äôve created in your Terraform code, but then that does not scale in an enterprise.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-hcl data-lang=hcl><span style=display:flex><span><span style=color:#ff79c6>resource</span> <span style=color:#f1fa8c>&#34;aws_ssm_patch_baseline&#34; &#34;front_end_servers&#34;</span> {
</span></span><span style=display:flex><span>  name <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;front-end-servers&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  ...<span style=color:#6272a4> # variables removed for brevity
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>resource</span> <span style=color:#f1fa8c>&#34;aws_ssm_patch_group&#34; &#34;front_end_servers&#34;</span> {
</span></span><span style=display:flex><span>  baseline_id <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>aws_ssm_patch_baseline</span>.<span style=color:#ff79c6>front_end_servers</span>.<span style=color:#ff79c6>id</span><span style=color:#6272a4> # Not good!
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>  patch_group <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;front_end_servers&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>This is what we want to avoid.</p><h3 id=data-sources-for-patch-baselines>Data Sources For Patch Baselines</h3><p><a href=https://www.terraform.io/docs/configuration/data-sources.html>Data sources</a> in Terraform allow you to pull resources in your platform that may exist in a separate state file to yours, or even a completely different IAC tool to Terraform, such as CloudFormation. What we need is a data source component for the <code>aws_ssm_patch_baseline</code> resource.</p><p>With a <a href=https://github.com/terraform-providers/terraform-provider-aws/pull/9486>pull request</a> I made to the <a href=https://github.com/terraform-providers/terraform-provider-aws>terraform-aws-provider</a> project - I added the ability to pull in <strong>patch baseline</strong> resources that exist in the AWS account you are targeting, meaning if the enterprise security team had deployed a patch baseline via a different stack, then you can reference that in your <strong>patch group</strong>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-hcl data-lang=hcl><span style=display:flex><span><span style=color:#6272a4># This resource is defined outside of the current working Terraform state
</span></span></span><span style=display:flex><span><span style=color:#6272a4># So we are making a call to retrieve the ID of the resource in AWS
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span><span style=color:#ff79c6>data</span> <span style=color:#f1fa8c>&#34;aws_ssm_patch_baseline&#34; &#34;front_end_servers&#34;</span> {
</span></span><span style=display:flex><span>  owner            <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;Self&#34;</span>
</span></span><span style=display:flex><span>  name_prefix      <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;FrontEndServers&#34;</span>
</span></span><span style=display:flex><span>  operating_system <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;CENTOS&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>resource</span> <span style=color:#f1fa8c>&#34;aws_ssm_patch_group&#34; &#34;front_end_servers&#34;</span> {
</span></span><span style=display:flex><span>  baseline_id <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>data</span>.<span style=color:#ff79c6>aws_ssm_patch_baseline</span>.<span style=color:#ff79c6>front_end_servers</span>.<span style=color:#ff79c6>id</span>
</span></span><span style=display:flex><span>  patch_group <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;front_end_servers&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>resource</span> <span style=color:#f1fa8c>&#34;aws_instance&#34; &#34;front_end_server&#34;</span> {
</span></span><span style=display:flex><span>  ...<span style=color:#6272a4> # variables removed for brevity
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>
</span></span><span style=display:flex><span>  tags <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>    &#34;Patch Group&#34; <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>aws_ssm_patch_group</span>.<span style=color:#ff79c6>front_end_servers</span>.<span style=color:#ff79c6>id</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The documentation for its usage can be found <a href=https://www.terraform.io/docs/providers/aws/d/ssm_patch_baseline.html>here</a>.</p><p>Another scenario might be where you want to reuse the <strong>patch baselines</strong> that AWS has created in your account. One such baseline is <code>AWS-WindowsPredefinedPatchBaseline-OS-Applications</code>, which patches both the Windows OS, and selected Microsoft applications installed on the Windows server.</p><p>Currently this is not the default baseline for Windows. So if you want to have this baseline assigned to a patch group, you could do something like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-hcl data-lang=hcl><span style=display:flex><span><span style=color:#ff79c6>data</span> <span style=color:#f1fa8c>&#34;aws_ssm_patch_baseline&#34; &#34;windows_predefined_os_and_apps&#34;</span> {
</span></span><span style=display:flex><span>  owner            <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;AWS&#34;</span>
</span></span><span style=display:flex><span>  name_prefix      <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;AWS-WindowsPredefinedPatchBaseline-OS-Applications&#34;</span>
</span></span><span style=display:flex><span>  operating_system <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;WINDOWS&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>resource</span> <span style=color:#f1fa8c>&#34;aws_ssm_patch_group&#34; &#34;active_directory&#34;</span> {
</span></span><span style=display:flex><span>  baseline_id <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>data</span>.<span style=color:#ff79c6>aws_ssm_patch_baseline</span>.<span style=color:#ff79c6>windows_predefined_os_and_apps</span>.<span style=color:#ff79c6>id</span>
</span></span><span style=display:flex><span>  patch_group <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;active_directory&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>resource</span> <span style=color:#f1fa8c>&#34;aws_instance&#34; &#34;active_directory&#34;</span> {
</span></span><span style=display:flex><span>  ...<span style=color:#6272a4> # variables removed for brevity
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>
</span></span><span style=display:flex><span>  tags <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>    &#34;Patch Group&#34; <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>aws_ssm_patch_group</span>.<span style=color:#ff79c6>active_directory</span>.<span style=color:#ff79c6>id</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=conclusion>Conclusion</h2><p>This is a relatively short post - but it was just a quick introduction to AWS Patch Manager. I hope you find it helpful in applying your enterprise patching strategy to your product teams!</p></div><footer></footer></article></section></div><footer class=footer><section class=container>¬©
2023
Joseph D. Heyburn
¬∑
Powered by <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main></body></html>