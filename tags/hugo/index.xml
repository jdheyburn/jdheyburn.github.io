<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>hugo on JDHeyburn</title>
    <link>https://jdheyburn.co.uk/tags/hugo/</link>
    <description>Recent content in hugo on JDHeyburn</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    <lastBuildDate>Sun, 19 Apr 2020 00:00:00 +0000</lastBuildDate>
    
	<atom:link href="https://jdheyburn.co.uk/tags/hugo/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Who Goes Blogging 5: Updates Galore!</title><enclosure url="https://jdheyburn.co.uk/images/jdheyburn_co_uk_card.png" type="image/jpg"></enclosure>
      <link>https://jdheyburn.co.uk/blog/who-goes-blogging-5-updates-galore/</link>
      <pubDate>Sun, 19 Apr 2020 00:00:00 +0000</pubDate>
      
      <guid>https://jdheyburn.co.uk/blog/who-goes-blogging-5-updates-galore/</guid>-->
      <description>&lt;p&gt;In this article we&amp;rsquo;re going to continue making some improvements to our Hugo website. Some of the things going to be covered are:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Upgrading our Hugo theme&lt;/li&gt;
&lt;li&gt;Upgrading the Hugo version&lt;/li&gt;
&lt;li&gt;Adding table of contents&lt;/li&gt;
&lt;li&gt;Adding support for title emojis&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;So far since this website has launched we haven&amp;rsquo;t upgraded either the Hugo version used to build our website, alongside the theme being used. Hugo is a very active project with new features and bug fixes being added all the time. By not upgrading Hugo, we are missing out on enhancements that we can make to the site.&lt;/p&gt;
&lt;p&gt;As for upgrading the theme, improvements in the styling or even making use of said new features in Hugo can be added as part of the theme. Remember that when you execute a &lt;code&gt;hugo&lt;/code&gt; command, turning the website from markdown to rendered HTML files, that the theme chosen will be used to render those files.&lt;/p&gt;
&lt;h2 id=&#34;upgrading-hugo&#34;&gt;Upgrading Hugo&lt;/h2&gt;
&lt;p&gt;This varies depending on what OS you are running on, but it is pretty much identical as the steps taken to install Hugo in the &lt;a href=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-1-getting-started/#blog-bootstrapping&#34;&gt;first place&lt;/a&gt;. Even the &lt;a href=&#34;https://gohugo.io/getting-started/installing/#upgrade-hugo&#34;&gt;documentation for upgrading&lt;/a&gt; is a one-liner:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Upgrading Hugo is as easy as downloading and replacing the executable you’ve placed in your &lt;code&gt;PATH&lt;/code&gt;, or running &lt;code&gt;brew upgrade hugo&lt;/code&gt; if using Homebrew on macOS.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;A quick execute of &lt;code&gt;hugo version&lt;/code&gt; tells us what we&amp;rsquo;re currently running. We can then have a look at the &lt;a href=&#34;https://github.com/gohugoio/hugo/releases/&#34;&gt;Hugo release page&lt;/a&gt; to find the latest one - which at the time of writing is &lt;a href=&#34;https://github.com/gohugoio/hugo/releases/tag/v0.68.3&#34;&gt;0.68.3&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ hugo version
Hugo Static Site Generator v0.58.3-4AAC02D4/extended linux/amd64 BuildDate: 2019-09-19T15:34:54Z
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;I run Linux so I would need to replace the executable on my &lt;code&gt;PATH&lt;/code&gt;. This can be done with a handy script to pull the archive and install it for us.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;HUGO_VERSION&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;0.68.3&amp;#34;&lt;/span&gt;
wget &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;https://github.com/gohugoio/hugo/releases/download/v&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;${&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;HUGO_VERSION&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;/hugo_extended_&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;${&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;HUGO_VERSION&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;_Linux-64bit.tar.gz&amp;#34;&lt;/span&gt;
tar -zxvf &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;hugo_extended_&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;${&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;HUGO_VERSION&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;_Linux-64bit.tar.gz&amp;#34;&lt;/span&gt; hugo
sudo mv -v hugo /usr/local/bin
hugo version
rm &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;hugo_extended_&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;${&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;HUGO_VERSION&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;_Linux-64bit.tar.gz&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Remember that the hugo-coder theme requires the extended version of Hugo in order for it to render files correctly.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;You can see where &lt;code&gt;hugo&lt;/code&gt; is currently installed on your system with the command &lt;code&gt;which hugo&lt;/code&gt;, given it is in your &lt;code&gt;PATH&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Executing &lt;code&gt;hugo version&lt;/code&gt; one more time confirms if the upgrade took place.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ hugo version
Hugo Static Site Generator v0.68.3-157669A0/extended linux/amd64 BuildDate: 2020-03-24T12:13:38Z
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;testing-for-any-issues&#34;&gt;Testing For Any Issues&lt;/h3&gt;
&lt;p&gt;At this point I would advise you do some testing with the new version to determine if your site is not only rendering as expected but functioning too. You can do this with the good old &lt;code&gt;hugo serve&lt;/code&gt; command as you would have used before when writing out articles, and fixing anything that looks out of place.&lt;/p&gt;
&lt;p&gt;However, since I&amp;rsquo;m going to be upgrading the hugo theme too, I&amp;rsquo;ll do my testing in one hit &lt;a href=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-5-updates-galore/#validation-and-testing&#34;&gt;later in this post&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&#34;updating-hugo-in-cicd&#34;&gt;Updating Hugo in CI/CD&lt;/h3&gt;
&lt;p&gt;We&amp;rsquo;ve only upgrading Hugo on our machines, but we also need to upgrade it in our CI/CD pipeline to ensure it deploys with the correct rendering too. We set this up in parts &lt;a href=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-3-1-deployment-methods-travisci/&#34;&gt;3.1&lt;/a&gt; and &lt;a href=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-3-2-deployment-methods-github-actions/&#34;&gt;3.2&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;m using GitHub Actions for my CI/CD pipeline, so I need to head to &lt;code&gt;.github/workflows/deploy.yml&lt;/code&gt; and change &lt;code&gt;hugo-version: &amp;quot;0.58.3&amp;quot;&lt;/code&gt; to &lt;code&gt;hugo-version: &amp;quot;0.68.3&amp;quot;&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;It&amp;rsquo;s as easy as that thanks to the pre-made GitHub Action!&lt;/p&gt;
&lt;h2 id=&#34;upgrading-hugo-theme&#34;&gt;Upgrading Hugo Theme&lt;/h2&gt;
&lt;h3 id=&#34;a-git-submodules-recap&#34;&gt;A git submodules recap&lt;/h3&gt;
&lt;p&gt;As mentioned before, I&amp;rsquo;m using hugo-coder as the theme for my Hugo website which is being pulled as a submodule in my git repository. I can interface with it via the command &lt;code&gt;git submodules&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;One of the cool things about &lt;code&gt;git submodules&lt;/code&gt; is I don&amp;rsquo;t need to have a copy of the source code for the theme in my project. I can just reference the codebase at a particular point in time - or a commit, and git will pull in the resources for which then my Hugo website can utilise it.&lt;/p&gt;
&lt;p&gt;We already defined this back in the &lt;a href=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-1-getting-started/&#34;&gt;first post of this series&lt;/a&gt;, in our root directory we created a file called &lt;code&gt;.gitmodules&lt;/code&gt; with the following contents:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;[&lt;/span&gt;submodule &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;themes/hugo-coder&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;]&lt;/span&gt;
	&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;path&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; themes/hugo-coder
	&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;url&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; https://github.com/luizdepra/hugo-coder.git
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Line by line, we are giving the submodule a name, telling git where to check out the module to, and lastly where git can find the repository for the module when we checkout our project.&lt;/p&gt;
&lt;p&gt;When we pull in the submodule for the first time, it creates a tree in our projects &lt;code&gt;.git/modules&lt;/code&gt; filled with metadata about the submodule.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ tree .git/modules/themes/hugo-coder -L &lt;span style=&#34;color:#bd93f9&#34;&gt;1&lt;/span&gt;
.git/modules/themes/hugo-coder
├── branches
├── config
├── description
├── HEAD
├── hooks
├── index
├── info
├── logs
├── objects
├── packed-refs
└── refs
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;The &lt;code&gt;.git/&lt;/code&gt; directory contains all the metadata about your repository so that &lt;code&gt;git&lt;/code&gt; knows where to pull/push to/from the repository, &lt;a href=&#34;https://githowto.com/git_internals_git_directory&#34;&gt;amongst other things&lt;/a&gt;. It has a near identical directory structure to the one shown above.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;One of the files in this directory is called &lt;code&gt;HEAD&lt;/code&gt;, and it contains the commit of which &lt;code&gt;git&lt;/code&gt; should checkout the submodule&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ cat .git/modules/themes/hugo-coder/HEAD
e66c1740611b15eee0069811d10b5a22b0dc4332
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;We can even view this commit in the repository at &lt;a href=&#34;https://github.com/luizdepra/hugo-coder/commit/e66c1740611b15eee0069811d10b5a22b0dc4332&#34;&gt;https://github.com/luizdepra/hugo-coder/commit/e66c1740611b15eee0069811d10b5a22b0dc4332&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&#34;upgrading-submodules&#34;&gt;Upgrading Submodules&lt;/h3&gt;
&lt;p&gt;To upgrade submodules in your project, you simply need to execute the command below:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;git submodule update --recursive --remote
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;We can then check the value in &lt;code&gt;.git/modules/themes/hugo-coder/HEAD&lt;/code&gt; and see what this is updated to.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ cat .git/modules/themes/hugo-coder/HEAD
acb4bf6f2dcce51a27dc0e1f1008afb369d378d8
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Nice - this has changed from the previous value. We can jump over to GitHub to verify this is indeed the latest version.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;hugo-coder-commit.png&#34;&gt;
    &lt;img src=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-5-updates-galore/hugo-coder-commit.png&#34;
         alt=&#34;Screenshot showing latest hugo-coder version in GitHub&#34;/&gt; &lt;/a&gt;&lt;figcaption&gt;
            &lt;p&gt;Verify at the &lt;a href=&#34;https://github.com/luizdepra/hugo-coder/commit/master&#34;&gt;GitHub repo page&lt;/a&gt;&lt;/p&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h2 id=&#34;validation-and-testing&#34;&gt;Validation and Testing&lt;/h2&gt;
&lt;p&gt;Now comes the testing part, ensuring that everything is working as intended with both the new Hugo version and the latest hugo-coder submodule. Some of the issues I came across were:&lt;/p&gt;
&lt;h3 id=&#34;center-tags-not-rending-correctly&#34;&gt;&lt;code&gt;&amp;lt;center&amp;gt;&lt;/code&gt; tags not rending correctly&lt;/h3&gt;
&lt;p&gt;I believe the new Hugo version broke this one, where images that were wrapped in &lt;code&gt;&amp;lt;center&amp;gt;&lt;/code&gt; tags were simply disappearing. I had been wrapping &lt;code&gt;{{&amp;lt; figure ... &amp;gt;}}&lt;/code&gt; shortcodes in &lt;code&gt;&amp;lt;center&amp;gt;&lt;/code&gt; tags in order to horizontally centre images - but it looks like the new version causes these images to appear completely.&lt;/p&gt;
&lt;p&gt;It looks like the &lt;code&gt;figure&lt;/code&gt; shortcodes now support &lt;code&gt;center&lt;/code&gt; as a &lt;code&gt;class&lt;/code&gt; property. Therefore we go from&amp;hellip;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;center&amp;gt;{{&amp;lt; figure src=&amp;quot;image-name.png&amp;quot; &amp;gt;}}&amp;lt;/center&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;To&amp;hellip;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;{{&amp;lt; figure src=&amp;quot;image-name.png&amp;quot; class=&amp;quot;center&amp;quot; &amp;gt;}}&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;lists-not-rendering-as-before&#34;&gt;Lists not rendering as before&lt;/h3&gt;
&lt;p&gt;It turns out that my markdown for articles wasn&amp;rsquo;t as watertight as I thought; Hugo is now a whole lot more strict in ensuring your syntax is correct. Check these two before and after for comparison.&lt;/p&gt;
&lt;figure&gt;
    &lt;img src=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-5-updates-galore/old-render-list.png&#34; class=&#34;screenshotimg&#34;
         alt=&#34;Screenshot showing old, proper list render&#34;/&gt; 
&lt;/figure&gt;

&lt;figure&gt;
    &lt;img src=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-5-updates-galore/new-render-list.png&#34; class=&#34;screenshotimg&#34;
         alt=&#34;Screenshot showing new, incorrect list render&#34;/&gt; 
&lt;/figure&gt;

&lt;p&gt;For this I just needed to fix the markdown by adding another indent to the list item.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;git-diff-list.png&#34;&gt;
    &lt;img src=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-5-updates-galore/git-diff-list.png&#34;
         alt=&#34;Screenshot showing git diff between old and new list&#34;/&gt; &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;I saw several cases of this, and including a &lt;a href=&#34;https://github.com/igorshubovych/markdownlint-cli&#34;&gt;markdown linter&lt;/a&gt; in the CI/CD pipeline would help to prevent this. This is something I&amp;rsquo;ll look to include in the near future.&lt;/p&gt;
&lt;h2 id=&#34;adding-new-features&#34;&gt;Adding New Features&lt;/h2&gt;
&lt;p&gt;The whole reason to upgrade both Hugo and the theme was to explore some of the new features that come in both of them, so let&amp;rsquo;s get adding them.&lt;/p&gt;
&lt;h2 id=&#34;adding-series-links-in-content-footer&#34;&gt;Adding Series Links in Content Footer&lt;/h2&gt;
&lt;p&gt;The hugo-coder theme now has better support for series - these are articles that directly follow on from one another, such as this Who Goes Blogging one. Series are nothing new to Hugo and we could have done them with the version we upgraded from, only in &lt;a href=&#34;https://github.com/luizdepra/hugo-coder/commit/27e83b1e5a9d8b7bbd42d202bd5ef57adcce659b&#34;&gt;this commit for hugo-coder&lt;/a&gt; has it added a layout for it to be rendered.&lt;/p&gt;
&lt;p&gt;To create a series, we use the &lt;code&gt;series&lt;/code&gt; front matter setting for articles. For the Who Goes Blogging articles, adding the front matter to them looks like this.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-yml&#34; data-lang=&#34;yml&#34;&gt;---
&lt;span style=&#34;color:#ff79c6&#34;&gt;date&lt;/span&gt;: 2020-03-10
&lt;span style=&#34;color:#ff79c6&#34;&gt;title&lt;/span&gt;: &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;Who Goes Blogging 3.2: Deployment Methods - GitHub Actions&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#6272a4&#34;&gt;#...&lt;/span&gt;
&lt;span style=&#34;display:block;width:100%;background-color:#3d3f4a&#34;&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;series&lt;/span&gt;:
&lt;/span&gt;&lt;span style=&#34;display:block;width:100%;background-color:#3d3f4a&#34;&gt;  - Who Goes Blogging
&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;tags&lt;/span&gt;:
&lt;span style=&#34;color:#6272a4&#34;&gt;#...&lt;/span&gt;
---

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Once this is done for all pages, hugo-coder will render the &lt;a href=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-5-updates-galore/#conclusion&#34;&gt;&lt;strong&gt;See also in &amp;hellip;&lt;/strong&gt;&lt;/a&gt; section at the article footer.&lt;/p&gt;
&lt;figure&gt;
    &lt;img src=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-5-updates-galore/series-footer-section.png&#34; class=&#34;screenshotimg&#34;
         alt=&#34;Screenshot showing series rendered in the page footer&#34;/&gt; 
&lt;/figure&gt;

&lt;h2 id=&#34;adding-table-of-contents&#34;&gt;Adding Table of Contents&lt;/h2&gt;
&lt;p&gt;Okay this one isn&amp;rsquo;t exactly a new feature of the theme, but since we&amp;rsquo;re playing around we may as well make use of this opportunity. Table of contents (TOC) aren&amp;rsquo;t included by default in the &lt;code&gt;hugo-coder&lt;/code&gt; theme, so we need to add it in ourselves.&lt;/p&gt;
&lt;p&gt;There is some &lt;a href=&#34;https://gohugo.io/content-management/toc/&#34;&gt;documentation&lt;/a&gt; on how to add TOC to your articles. Before we do that we need to revisit how layouts are organised as discussed briefly in &lt;a href=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-4-content-structure-and-refactoring/#fixing-article-rendering&#34;&gt;a previous post&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&#34;template-lookup-order-primer&#34;&gt;Template Lookup Order Primer&lt;/h3&gt;
&lt;p&gt;The type of a markdown file (defined by the front matter setting &lt;code&gt;type&lt;/code&gt;) tells Hugo where to look for in the &lt;code&gt;layouts/&lt;/code&gt; directory of your project. The Hugo theme you&amp;rsquo;re using will already have these all defined, hence why they are predefined themes! Before Hugo looks for these layout HTML files in your theme, it will check for them in your projects &lt;code&gt;layouts/&lt;/code&gt; directory first.&lt;/p&gt;
&lt;p&gt;In other words, the order of precedence (or hierarchy) for HTML files is anything in the project &lt;code&gt;layouts/&lt;/code&gt; directory takes a higher priority than that in your theme - as described in Hugo&amp;rsquo;s &lt;a href=&#34;https://gohugo.io/templates/lookup-order/&#34;&gt;documentation for template lookup order&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;See below for a directory tree explaning this - a lot of content has been removed for brevity.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ tree layouts
layouts
├── posts
│   └── single.html					&lt;span style=&#34;color:#6272a4&#34;&gt;# hugo will use this file to render your HTML&lt;/span&gt;
└── themes
    └── hugo-coder
	    └── layouts
			└── posts
			    └── single.html     &lt;span style=&#34;color:#6272a4&#34;&gt;# hugo will ignore this one in the themes directory&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;implementation&#34;&gt;Implementation&lt;/h3&gt;
&lt;p&gt;The primer above gives a hint as to what file we need to modify. The &lt;a href=&#34;https://github.com/luizdepra/hugo-coder/blob/master/layouts/posts/single.html&#34;&gt;&lt;code&gt;single.html&lt;/code&gt;&lt;/a&gt; file is in charge of how articles are rendered. Since we want everything else to remain the same about this file, we can take a copy of the file as it currently stands and place it into our project root.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;mkdir layouts/posts
cp -v themes/hugo-coder/layouts/posts/single.html layouts/posts
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;I won&amp;rsquo;t go into the details here, I&amp;rsquo;ll leave that to you to make changes to see how they affect the rendering of the page.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I want the TOC to appear before the main content, but after the featured image for the article (if there is any). Based on this the files is going to need the highlighted change below.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;29
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;30
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;31
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;32
&lt;/span&gt;&lt;span style=&#34;display:block;width:100%;background-color:#3d3f4a&#34;&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;33
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;34
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;35
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&amp;lt;&lt;span style=&#34;color:#ff79c6&#34;&gt;div&lt;/span&gt;&amp;gt;
  {{ if .Params.featured_image }}
  &amp;lt;&lt;span style=&#34;color:#ff79c6&#34;&gt;img&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;src&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;{{ .Params.featured_image }}&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;alt&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;Featured image&amp;#34;&lt;/span&gt; /&amp;gt;
  {{ end }}
&lt;span style=&#34;display:block;width:100%;background-color:#3d3f4a&#34;&gt;  {{ partial &amp;#34;toc.html&amp;#34; . }}
&lt;/span&gt;  {{ .Content }}
&amp;lt;/&lt;span style=&#34;color:#ff79c6&#34;&gt;div&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;We&amp;rsquo;re not done there - we&amp;rsquo;ve referenced a &lt;a href=&#34;https://gohugo.io/templates/partials/&#34;&gt;partial template file&lt;/a&gt; here. These allow us to reuse HTML files in multiple places, or to break up a large HTML file into smaller, more easier to manage chunks.&lt;/p&gt;
&lt;p&gt;Partial templates are found under the &lt;code&gt;layouts/partials&lt;/code&gt; directory and follow the same principle as defined in the primer for template lookups, and are referenced back as &lt;code&gt;{{ partial &amp;quot;&amp;lt;partial_name&amp;gt;.html&amp;quot; . }}&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Let&amp;rsquo;s go ahead and create the &lt;code&gt;layouts/partials/toc.html&lt;/code&gt; file and populate it as below.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;{{ if and (gt .WordCount 400 ) (.Site.Params.toc) }}
&amp;lt;&lt;span style=&#34;color:#ff79c6&#34;&gt;aside&lt;/span&gt;&amp;gt;
  {{.TableOfContents}}
&amp;lt;/&lt;span style=&#34;color:#ff79c6&#34;&gt;aside&lt;/span&gt;&amp;gt;
{{ end }}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This is similar to &lt;a href=&#34;https://gohugo.io/content-management/toc/#template-example-toc-partial&#34;&gt;Hugo&amp;rsquo;s example&lt;/a&gt; but just tweaked a bit. I&amp;rsquo;m not looking to do anything too fancy with the styling just yet, but maybe later on.&lt;/p&gt;
&lt;p&gt;Previewing it by &lt;code&gt;hugo serve&lt;/code&gt; we should get something that appears as below.&lt;/p&gt;
&lt;figure&gt;
    &lt;img src=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-5-updates-galore/completed-toc.png&#34; class=&#34;screenshotimg&#34;
         alt=&#34;Screenshot showing rendered Table of Contents&#34;/&gt; 
&lt;/figure&gt;

&lt;h3 id=&#34;bugs-along-the-way&#34;&gt;Bugs Along The Way&lt;/h3&gt;
&lt;p&gt;As the heading suggests, there were a few extra things I needed to change before releasing it into the wild.&lt;/p&gt;
&lt;h4 id=&#34;fix-improper-headings&#34;&gt;Fix Improper Headings&lt;/h4&gt;
&lt;p&gt;Per &lt;a href=&#34;https://gohugo.io/content-management/toc/#usage&#34;&gt;Table of Contents Usage documentation&lt;/a&gt;, Hugo will render from &lt;code&gt;&amp;lt;h2&amp;gt;&lt;/code&gt; headings, which are defined as &lt;code&gt;##&lt;/code&gt; in markdown. So &lt;code&gt;# Introduction&lt;/code&gt; would not be included in the TOC, but &lt;code&gt;## Introduction&lt;/code&gt; will.&lt;/p&gt;
&lt;p&gt;This is a problem for some of my articles since I&amp;rsquo;ve been writing headings liberally at the wrong level.&lt;/p&gt;
&lt;figure class=&#34;center&#34;&gt;
    &lt;img src=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-5-updates-galore/improper-toc-headings.png&#34; class=&#34;screenshotimg&#34;
         alt=&#34;Screenshot showing table of contents not including all headings for a post&#34;/&gt; &lt;figcaption&gt;
            &lt;p&gt;Notice the &lt;strong&gt;Applying Cartography&lt;/strong&gt; heading doesn&amp;rsquo;t appear in the TOC&lt;/p&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;The given example above shows what happens when we use &lt;code&gt;# Heading Name&lt;/code&gt; instead of &lt;code&gt;## Heading Name&lt;/code&gt;. To fix this I just need to go through each heading and make sure top-level headings begin with &lt;code&gt;##&lt;/code&gt; and any subheadings have an additional &lt;code&gt;#&lt;/code&gt;.&lt;/p&gt;
&lt;figure class=&#34;center&#34;&gt;
    &lt;img src=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-5-updates-galore/proper-toc-headings.png&#34; class=&#34;screenshotimg&#34;
         alt=&#34;Screenshot showing table of contents fixed with correct heading indentation&#34;/&gt; &lt;figcaption&gt;
            &lt;p&gt;Much better!&lt;/p&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h4 id=&#34;fix-emojis&#34;&gt;Fix Emojis&lt;/h4&gt;
&lt;p&gt;Who doesn&amp;rsquo;t love the use of emojis ⁉️ Well I don&amp;rsquo;t when they render badly. Before this exercise I was using a custom shortcode to render them.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;# layouts/shortcodes/emoji.html
{{ .Get 0 | emojify }}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&#34;https://gohugo.io/content-management/shortcodes/&#34;&gt;Shortcodes&lt;/a&gt; are similar to partial templates in that they contain HTML, but they are usually for referring to one HTML element as opposed to multiple.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Then in my markdown I would refer back to them such as &lt;code&gt;{{&amp;lt; emoji &amp;quot;:wave:&amp;quot; &amp;gt;}}&lt;/code&gt;. However in headings they rendered as below&amp;hellip;&lt;/p&gt;
&lt;figure class=&#34;center&#34;&gt;
    &lt;img src=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-5-updates-galore/bad-emojis-headings.png&#34; class=&#34;screenshotimg&#34;
         alt=&#34;Screenshot showing poorly rendered emojis in Table of Contents&#34;/&gt; &lt;figcaption&gt;
            &lt;p&gt;Hugo clearly finds this hysterical&lt;/p&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;It&amp;rsquo;s a weird one for sure - especially since they render fine in the headings themselves already&amp;hellip;&lt;/p&gt;
&lt;figure class=&#34;center&#34;&gt;
    &lt;img src=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-5-updates-galore/good-emoji-heading-1.png&#34; class=&#34;screenshotimg&#34;
         alt=&#34;Screenshot with heading example with emoji 1&#34;/&gt; 
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;
    &lt;img src=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-5-updates-galore/good-emoji-heading-2.png&#34; class=&#34;screenshotimg&#34;
         alt=&#34;Screenshot with heading example with emoji 2&#34;/&gt; 
&lt;/figure&gt;

&lt;p&gt;There is a fix for these, and it&amp;rsquo;s called &lt;em&gt;rendering emojis the correct way!&lt;/em&gt; 😅&lt;/p&gt;
&lt;p&gt;Firstly in the site &lt;code&gt;config.toml&lt;/code&gt; I added &lt;code&gt;enableEmoji = true&lt;/code&gt; at the root level and then proceeded to change all occurrence of &lt;code&gt;{{&amp;lt; emoji &amp;quot;:emoji_name:&amp;quot; &amp;gt;}}&lt;/code&gt; to &lt;code&gt;:emoji_name:&lt;/code&gt;. With that I can then remove &lt;code&gt;layouts/shortcodes/emoji.html&lt;/code&gt; since it&amp;rsquo;s not being referred back to anymore.&lt;/p&gt;
&lt;figure class=&#34;center&#34;&gt;
    &lt;img src=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-5-updates-galore/correct-emoji-headings.png&#34; class=&#34;screenshotimg&#34;
         alt=&#34;Screenshot with correct emoji rendering in table of contents&#34;/&gt; &lt;figcaption&gt;
            &lt;p&gt;Nicely done&lt;/p&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h4 id=&#34;markdown-not-rendering&#34;&gt;Markdown Not Rendering&lt;/h4&gt;
&lt;p&gt;I also noticed that markdown wasn&amp;rsquo;t rendering properly too. Given the markdown &lt;code&gt;## Spice Up Your ~~Life~~ Python 🐍&lt;/code&gt;, which renders as a heading in the screenshot below&amp;hellip;&lt;/p&gt;
&lt;figure class=&#34;center&#34;&gt;
    &lt;img src=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-5-updates-galore/markdown-heading-render.png&#34; class=&#34;screenshotimg&#34;
         alt=&#34;Screenshot showing a heading formatted correctly with markdown&#34;/&gt; 
&lt;/figure&gt;

&lt;p&gt;But in the table of contents it appears without the tilde strikethrough (&lt;code&gt;~&lt;/code&gt;) rendering.&lt;/p&gt;
&lt;figure class=&#34;center&#34;&gt;
    &lt;img src=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-5-updates-galore/incorrect-markdown-rendering-toc.png&#34; class=&#34;screenshotimg&#34;
         alt=&#34;Screenshot showing tilde strikethrough not appearing in table of content entry&#34;/&gt; 
&lt;/figure&gt;

&lt;p&gt;This looks to be a bug within Hugo itself, since I was able to get &lt;strong&gt;strong&lt;/strong&gt; and &lt;em&gt;emphasise&lt;/em&gt; to render fine - I &lt;a href=&#34;https://github.com/gohugoio/hugo/issues/7169&#34;&gt;raised an issue&lt;/a&gt; on the project - I can live with it for now.&lt;/p&gt;
&lt;h2 id=&#34;emojify-everything&#34;&gt;Emojify Everything!&lt;/h2&gt;
&lt;p&gt;Continuing on the theme of emojis; we were able to get them to appear in the Table of Contents fine. But what about in the titles of the articles themselves? We can add them in the &lt;code&gt;title&lt;/code&gt; front matter setting like below:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-yml&#34; data-lang=&#34;yml&#34;&gt;---
&lt;span style=&#34;color:#ff79c6&#34;&gt;date&lt;/span&gt;: 2019-07-05
&lt;span style=&#34;display:block;width:100%;background-color:#3d3f4a&#34;&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;title&lt;/span&gt;: &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;:​​​snake: Three Ways To Spice Up Your Python Code&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;# ...&lt;/span&gt;
---

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Having a look around the site we see these aren&amp;rsquo;t getting rendered correctly in a number of places&amp;hellip;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;(1)&lt;/strong&gt; Post title&lt;/p&gt;
&lt;figure class=&#34;center&#34;&gt;
    &lt;img src=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-5-updates-galore/broken-emoji-post-title.png&#34; class=&#34;screenshotimg&#34;
         alt=&#34;Screenshot of broken emoji on post title&#34;/&gt; 
&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;(2)&lt;/strong&gt; Browser title&lt;/p&gt;
&lt;figure class=&#34;center&#34;&gt;&lt;a href=&#34;broken-emoji-browser-title.png&#34;&gt;
    &lt;img src=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-5-updates-galore/broken-emoji-browser-title.png&#34;
         alt=&#34;Screenshot of broken emoji on browser title&#34;/&gt; &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;(3)&lt;/strong&gt; Type list entry&lt;/p&gt;
&lt;figure class=&#34;center&#34;&gt;
    &lt;img src=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-5-updates-galore/broken-emoji-list.png&#34; class=&#34;screenshotimg&#34;
         alt=&#34;Screenshot of broken emoji rendering on lists&#34;/&gt; 
&lt;/figure&gt;

&lt;p&gt;This is all to do with how the theme is rendering these, they are not &amp;ldquo;&lt;a href=&#34;https://gohugo.io/functions/emojify/&#34;&gt;emojifying&lt;/a&gt;&amp;rdquo; the text it is receiving. This is easy to fix but it involves us copying over the respective files where they are being rendered from in hugo-coder and overwriting thme in our project root (back to &lt;a href=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-5-updates-galore/#template-lookup-order-primer&#34;&gt;template ordering&lt;/a&gt; again!).&lt;/p&gt;
&lt;h3 id=&#34;fix-post--browser-title&#34;&gt;Fix Post &amp;amp; Browser Title&lt;/h3&gt;
&lt;p&gt;We can kill two birds with one stone since these are both found in the same file, the &lt;code&gt;layouts/posts/single.html&lt;/code&gt; file - this is the main file used to render the article page. If you followed &lt;a href=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-5-updates-galore/#implementation&#34;&gt;above&lt;/a&gt;, you&amp;rsquo;ll notice we already copied across that file to our project root in order to add a TOC.&lt;/p&gt;
&lt;p&gt;We need to go back to that file and &lt;em&gt;emojify&lt;/em&gt; both the main article heading, alongside the browser title to change any occurrence of &lt;code&gt;{{ .Title }}&lt;/code&gt; to &lt;code&gt;{{ .Title | emojify }}&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;By doing this we will &lt;em&gt;always&lt;/em&gt; emojify the titles even if in our &lt;code&gt;config.toml&lt;/code&gt; we specified &lt;code&gt;enableEmoji = false&lt;/code&gt;, or didn&amp;rsquo;t specify it at all. This will conflict with the default state of the setting which is &lt;code&gt;false&lt;/code&gt;. We could do some conditional logic on the &lt;code&gt;enableEmoji&lt;/code&gt; setting, but unfortunately this isn&amp;rsquo;t exposed to us to be able to perform something like &lt;code&gt;{{ if .Site.enableEmoji }}&lt;/code&gt;. Because of this we cannot create a pull request (PR) to merge it in with the &lt;code&gt;hugo-coder&lt;/code&gt; theme. I&amp;rsquo;ve raised a &lt;a href=&#34;https://github.com/gohugoio/hugo/issues/7171&#34;&gt;couple&lt;/a&gt; of &lt;a href=&#34;https://github.com/gohugoio/hugo/issues/7170&#34;&gt;issues&lt;/a&gt; against Hugo requesting these features.&lt;/p&gt;
&lt;p&gt;Since this is just for my website I am okay with the overriding behaviour of emojiying the title.&lt;/p&gt;
&lt;p&gt;See the Gist below for my completed &lt;code&gt;single.html&lt;/code&gt; file, including the TOC addition earlier.&lt;/p&gt;
&lt;script type=&#34;application/javascript&#34; src=&#34;https://gist.github.com/jdheyburn/35a10e346848379ec5f6f87cb48454cd/3a30b153aae5a761f62293add95187e280d8c3d3.js&#34;&gt;&lt;/script&gt;

&lt;p&gt;You&amp;rsquo;ll notice I&amp;rsquo;m emojifying (surely I&amp;rsquo;ve said this enough times to make it into the Oxford Dictionary?!) the site title too. This is incase myself (or even yourselves) wish to add emojis there too.&lt;/p&gt;
&lt;p&gt;The end result for the title will look like this:&lt;/p&gt;
&lt;figure class=&#34;center&#34;&gt;
    &lt;img src=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-5-updates-galore/fixed-emoji-post-title.png&#34; class=&#34;screenshotimg&#34;
         alt=&#34;Screenshot of fixed emoji on post title&#34;/&gt; 
&lt;/figure&gt;

&lt;p&gt;And the browser title is fixed accordingly:&lt;/p&gt;
&lt;figure class=&#34;center&#34;&gt;&lt;a href=&#34;fixed-emoji-browser-title.png&#34;&gt;
    &lt;img src=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-5-updates-galore/fixed-emoji-browser-title.png&#34;
         alt=&#34;Screenshot of fixed emoji on browser title&#34;/&gt; &lt;/a&gt;
&lt;/figure&gt;

&lt;h3 id=&#34;fix-type-list-entry&#34;&gt;Fix Type List Entry&lt;/h3&gt;
&lt;p&gt;We need to find the file in the theme that determines how to render a list entry for a page of type &lt;code&gt;posts&lt;/code&gt; and make the modification there - &lt;code&gt;layouts/posts/li.html&lt;/code&gt;. We&amp;rsquo;ll need to do the same here as we did for &lt;code&gt;single.html&lt;/code&gt; and copy it to our project root.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;cp -v themes/hugo-coder/layouts/posts/li.html layouts/posts
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Likewise for the title in the previous section, we need to emojify the title of the article as it&amp;rsquo;s being listed out.&lt;/p&gt;
&lt;script type=&#34;application/javascript&#34; src=&#34;https://gist.github.com/jdheyburn/177fb9f74a38306d9257fb7302ba221c.js&#34;&gt;&lt;/script&gt;

&lt;p&gt;Once done, we can see it reflect nicely in the list:&lt;/p&gt;
&lt;figure class=&#34;center&#34;&gt;
    &lt;img src=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-5-updates-galore/fixed-emoji-list.png&#34; class=&#34;screenshotimg&#34;
         alt=&#34;Screenshot of fixed emoji rendering on lists&#34;/&gt; 
&lt;/figure&gt;

&lt;h2 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;There was a lot covered in this post, to recap we&amp;hellip;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Upgraded the Hugo version used to render the website locally, as well as in the CI/CD pipeline&lt;/li&gt;
&lt;li&gt;Also updated the version of the theme we&amp;rsquo;re using
&lt;ul&gt;
&lt;li&gt;Made use of new features that came with it such as series links&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Added a table of contents to our longer articles&lt;/li&gt;
&lt;li&gt;Added support for emojis in post titles&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;You can view all the changes made in this post at this &lt;a href=&#34;https://github.com/jdheyburn/jdheyburn.co.uk/pull/2&#34;&gt;pull request&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Thanks for reading! 🌝&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Who Goes Blogging 4: Content Structure &amp; Refactoring</title><enclosure url="https://jdheyburn.co.uk/images/jdheyburn_co_uk_card.png" type="image/jpg"></enclosure>
      <link>https://jdheyburn.co.uk/blog/who-goes-blogging-4-content-structure-and-refactoring/</link>
      <pubDate>Tue, 31 Mar 2020 00:00:00 +0000</pubDate>
      
      <guid>https://jdheyburn.co.uk/blog/who-goes-blogging-4-content-structure-and-refactoring/</guid>-->
      <description>&lt;p&gt;So far in this series we&amp;rsquo;ve been looking at the infrastructure behind the Hugo website, but I haven&amp;rsquo;t looked into improving the content layout of the site. Some of the improvements I want to make are:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Moving content articles from a flat structure to a leaf bundle&lt;/li&gt;
&lt;li&gt;Rename content section to &lt;strong&gt;blog&lt;/strong&gt; from &lt;strong&gt;posts&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Upgrading &lt;code&gt;hugo-coder&lt;/code&gt; theme and &lt;code&gt;hugo&lt;/code&gt; version&lt;/li&gt;
&lt;li&gt;Adding a table of contents to the pages&lt;/li&gt;
&lt;li&gt;&amp;hellip; and further improvements as I find them&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;This post will cover items 1-2, the others will be in a follow up post.&lt;/p&gt;
&lt;h2 id=&#34;content-article-reorganising&#34;&gt;Content Article Reorganising&lt;/h2&gt;
&lt;p&gt;Hugo has a few different ways you can organise your content, known as &lt;a href=&#34;https://gohugo.io/content-management/page-bundles/&#34;&gt;Page Bundles&lt;/a&gt;. Up to now  I&amp;rsquo;ve adopted &lt;a href=&#34;https://gohugo.io/content-management/page-bundles/#branch-bundles&#34;&gt;Branch Bundles&lt;/a&gt; where I have all my articles in named markdown files under the &lt;code&gt;content/posts&lt;/code&gt; directory - acting as the branch bundle, and storing all images under &lt;code&gt;static/images&lt;/code&gt; - so the article at &lt;code&gt;content/posts/blog-bootstrap.md&lt;/code&gt; will be available at &lt;code&gt;/posts/blog-bootstrap/&lt;/code&gt;. As time has gone on, the images directory has gotten rather large and difficult to understand what images apply to what posts.&lt;/p&gt;
&lt;p&gt;The alternative way to organise content is the &lt;a href=&#34;https://gohugo.io/content-management/page-bundles/#leaf-bundles&#34;&gt;Leaf Bundle&lt;/a&gt;. This is where at a branch level you have a directory with the name of the article you wish to publish, followed by an &lt;code&gt;index.md&lt;/code&gt; file with the article content - such as &lt;code&gt;content/posts/blog-bootstrap/index.md&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Any page resources defined in this directory can be referenced relatively in the markdown files within it, such that any images can be stored within &lt;code&gt;content/posts/blog-bootstrap/&lt;/code&gt; and referred to in the markdown as &lt;code&gt;figure src=&amp;quot;my-relative-img.png&amp;quot; ...&lt;/code&gt; as opposed to &lt;code&gt;src=&amp;quot;/images/my-not-relative-img.png&amp;quot; ...&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;This allows me to organise content much more effectively such that we will be going from this structure:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ tree content/posts 
content/posts
├── blog-bootstrap.md
├── extending-gotests-for-strict-error-tests.md
├── on-becoming-an-open-source-software-contributor.md
├── three-ways-to-spice-up-your-python-code.md
├── who-goes-blogging-0-applying-cartography.md
├── who-goes-blogging-1-getting-started.md
├── who-goes-blogging-2-custom-domain.md
├── who-goes-blogging-3-1-deployment-methods-travisci.md
└── who-goes-blogging-3-2-deployment-methods-github-actions.md

&lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt; directories, &lt;span style=&#34;color:#bd93f9&#34;&gt;9&lt;/span&gt; files
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ tree static/images 
static/images
├── analytics_example.png
├── ...                     &lt;span style=&#34;color:#6272a4&#34;&gt;# Everything stored in a flat hierarchy&lt;/span&gt;
└── type_hinting.png

&lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt; directories, &lt;span style=&#34;color:#bd93f9&#34;&gt;57&lt;/span&gt; files
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;To this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ tree content/posts
content/posts
├── blog-bootstrap
│   └── index.md
├── extending-gotests-for-strict-error-tests
│   └── index.md
├── on-becoming-an-open-source-software-contributor
│   ├── card.png
│   ├── elephant-cartoon.png
│   └── index.md
├── ...                     
└── who-goes-blogging-3-2-deployment-methods-github-actions
    ├── gha-deploy-key.png
    ├── gha-secrets-key.png
    ├── github-actions-build.png
    ├── index.md
    └── travis-disable-build.png

&lt;span style=&#34;color:#bd93f9&#34;&gt;9&lt;/span&gt; directories, &lt;span style=&#34;color:#bd93f9&#34;&gt;45&lt;/span&gt; files
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;One other benefit of grouping all content together in a bundle is it allows you to use just one command to add your article content to the repository - no more will images in another directory be forgotten about!&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;git add content/blog/&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;$articleName&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;transformation-script&#34;&gt;Transformation Script&lt;/h3&gt;
&lt;p&gt;As opposed to doing the transformation manually, I&amp;rsquo;ve written a script which will move and alter the files for us.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;23
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;24
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;25
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;26
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;27
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;28
&lt;/span&gt;&lt;span style=&#34;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;29
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;# in project root dir&lt;/span&gt;
&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;posts&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;$(&lt;/span&gt;find content/posts -type f -name &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;*.md&amp;#39;&lt;/span&gt; -not -path &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;**/index.md&amp;#39;&lt;/span&gt; -not -path &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;**/_index.md&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;)&lt;/span&gt;
&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;echo&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;$posts&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;&lt;/span&gt; | &lt;span style=&#34;color:#ff79c6&#34;&gt;while&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;read&lt;/span&gt; p; &lt;span style=&#34;color:#ff79c6&#34;&gt;do&lt;/span&gt;
    &lt;span style=&#34;color:#6272a4&#34;&gt;# Move to leaf bundle&lt;/span&gt;
    &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;postFname&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;$(&lt;/span&gt;basename -- &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;$p&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;)&lt;/span&gt;
    &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;title&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;${&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;postFname&lt;/span&gt;%.*&lt;span style=&#34;color:#f1fa8c&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;&lt;/span&gt;
    &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;leafBundleDir&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;content/posts/&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;$title&lt;/span&gt;
    mkdir &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;$leafBundleDir&lt;/span&gt;
    &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;newPostLocation&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;$leafBundleDir&lt;/span&gt;/index.md
    git mv -v &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;$p&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;$newPostLocation&lt;/span&gt;

    &lt;span style=&#34;color:#6272a4&#34;&gt;# Move images referenced in the articles to new leaf bundle dir&lt;/span&gt;
    &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;images&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;$(&lt;/span&gt;grep -oP &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;images\/.*.(png|jpg|jpeg)&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;$newPostLocation&lt;/span&gt; | xargs -n1 | sort -u&lt;span style=&#34;color:#ff79c6&#34;&gt;)&lt;/span&gt;
    &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;echo&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;$images&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;&lt;/span&gt; | &lt;span style=&#34;color:#ff79c6&#34;&gt;while&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;read&lt;/span&gt; i; &lt;span style=&#34;color:#ff79c6&#34;&gt;do&lt;/span&gt;
        &lt;span style=&#34;color:#ff79c6&#34;&gt;[&lt;/span&gt; -z &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;$i&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;continue&lt;/span&gt;
        &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;imgFname&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;$(&lt;/span&gt;basename -- &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;$i&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;)&lt;/span&gt;
        git mv -v static/&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;$i&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;$leafBundleDir&lt;/span&gt;/&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;$imgFname&lt;/span&gt;
    &lt;span style=&#34;color:#ff79c6&#34;&gt;done&lt;/span&gt;

    &lt;span style=&#34;color:#6272a4&#34;&gt;# Change references to images in the article&lt;/span&gt;
    &lt;span style=&#34;color:#6272a4&#34;&gt;## figure src=&amp;#34;/images/namecheap-domain-purchase.png&amp;#34;&lt;/span&gt;
    sed -i &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;s/src=&amp;#34;\/images\//src=&amp;#34;/g&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;$newPostLocation&lt;/span&gt;
    &lt;span style=&#34;color:#6272a4&#34;&gt;## images:&lt;/span&gt;
    &lt;span style=&#34;color:#6272a4&#34;&gt;##   - images/namecheap_landing.png&lt;/span&gt;
    sed -i &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;s/- images\//- /g&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;$newPostLocation&lt;/span&gt;
    &lt;span style=&#34;color:#6272a4&#34;&gt;## [blog_arch]: /images/blog-arch-cover.png&lt;/span&gt;
    sed -i &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;s/: \/images\//: /g&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;$newPostLocation&lt;/span&gt;
    git add &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;$newPostLocation&lt;/span&gt;
&lt;span style=&#34;color:#ff79c6&#34;&gt;done&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Breaking down the script, firstly we are retrieving all posts that aren&amp;rsquo;t already converted to a leaf bundle and looping over them, where lines 4-9 performs the conversion itself.&lt;/p&gt;
&lt;p&gt;Once that is done then we need to get all images that are referenced in that post and move them to the new leaf bundle for the post. This is done in lines 12-17.&lt;/p&gt;
&lt;p&gt;Lastly, we then need to change the post content itself so that it references images in the location relative to the leaf bundle instead of under &lt;code&gt;static/images&lt;/code&gt; - lines 21-26 accomplish this.&lt;/p&gt;
&lt;p&gt;Hugo allows you to define &lt;code&gt;img&lt;/code&gt; blocks in several ways, where I&amp;rsquo;m currently using 3 of these methods. I &lt;del&gt;probably&lt;/del&gt; should replace these with one approach - for the time being 3 &lt;code&gt;sed&lt;/code&gt; commands will do the trick for me.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I&amp;rsquo;m sure that a few lines could be cut out with some better regex expressions - but I&amp;rsquo;m not an expert at them so I&amp;rsquo;d rather crack on with what I know 😃&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;renaming-content-section&#34;&gt;Renaming Content Section&lt;/h2&gt;
&lt;p&gt;A gripe I&amp;rsquo;ve had with my site is when you click on &lt;strong&gt;Blog&lt;/strong&gt; in the site header it takes you to &lt;strong&gt;Posts&lt;/strong&gt;. Similar to the previous section this is because of &lt;a href=&#34;https://gohugo.io/content-management/page-bundles/#branch-bundles&#34;&gt;Branch Bundles&lt;/a&gt; which are any directory that sits underneath the &lt;code&gt;content&lt;/code&gt; directory. The bundle name here is what forms the URL and the parent page for those articles &lt;a href=&#34;https://gohugo.io/content-management/sections/&#34;&gt;as defined&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Based on this information, migrating should be as easy as&amp;hellip;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ git mv content/posts/ content/blog/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Despite doing this, we come across some problems&amp;hellip;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;We lose the correct rendering for the article
&lt;ul&gt;
&lt;li&gt;Hugo doesn&amp;rsquo;t know how to render content with type &lt;code&gt;blog&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Existing URL links are broken
&lt;ul&gt;
&lt;li&gt;All hyperlinks both internal and external are referring to articles at &lt;code&gt;/posts/&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Blog landing page is now &lt;strong&gt;Blogs&lt;/strong&gt;?? (see below)&lt;/li&gt;
&lt;/ol&gt;
&lt;figure&gt;&lt;a href=&#34;blogs-landing-page.png&#34;&gt;
    &lt;img src=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-4-content-structure-and-refactoring/blogs-landing-page.png&#34;
         alt=&#34;Screenshot of Blog landing page with incorrect Blogs title&#34;/&gt; &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;Let&amp;rsquo;s walk through them one by one.&lt;/p&gt;
&lt;h3 id=&#34;fixing-article-rendering&#34;&gt;Fixing Article Rendering&lt;/h3&gt;
&lt;p&gt;We just made our existing articles leaf bundles that sat under &lt;code&gt;content/posts&lt;/code&gt;, but now this is renamed to &lt;code&gt;content/blog&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ tree contents/blog -L &lt;span style=&#34;color:#bd93f9&#34;&gt;1&lt;/span&gt;
content/blog
├── blog-bootstrap
├── extending-gotests-for-strict-error-tests
├── on-becoming-an-open-source-software-contributor
├── three-ways-to-spice-up-your-python-code
├── who-goes-blogging-0-applying-cartography
├── who-goes-blogging-1-getting-started
├── who-goes-blogging-2-custom-domain
├── who-goes-blogging-3-1-deployment-methods-travisci
└── who-goes-blogging-3-2-deployment-methods-github-actions

&lt;span style=&#34;color:#bd93f9&#34;&gt;9&lt;/span&gt; directories, &lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt; files
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The section of which your article sits underneath also tells Hugo how it should render the page - known as &lt;a href=&#34;https://gohugo.io/content-management/types/#defining-a-content-type&#34;&gt;Content Types&lt;/a&gt;. Take the article blog-bootstrap which is under &lt;code&gt;posts&lt;/code&gt;; Hugo will look in the theme for &lt;code&gt;layouts/posts&lt;/code&gt; for &lt;code&gt;html&lt;/code&gt; files to render it against* - this is how the articles go from a markdown file to rendered HTML.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;* Hugo will &lt;a href=&#34;https://gohugo.io/templates/lookup-order/&#34;&gt;first look&lt;/a&gt; in your local project for any overriding files.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ tree themes/hugo-coder/layouts/posts 
themes/hugo-coder/layouts/posts
├── li.html
├── list.html
└── single.html

&lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt; directories, &lt;span style=&#34;color:#bd93f9&#34;&gt;3&lt;/span&gt; files
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;When we change the section name the article sits in, Hugo will not know how to render it correctly and will resolve to the default rendering for the theme. This ends us with something like the below.&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;posts-blog-rendering-error.png&#34;&gt;
    &lt;img src=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-4-content-structure-and-refactoring/posts-blog-rendering-error.png&#34;
         alt=&#34;Screenshot of comparison of correct and incorrect rendering - publish date, minutes to read, and tags are missing&#34;/&gt; &lt;/a&gt;&lt;figcaption&gt;
            &lt;p&gt;Correct rendering on the left - notice publish date, minutes to read, and tags are missing&lt;/p&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;One way of fixing this would be to also change the &lt;code&gt;hugo-coder&lt;/code&gt; theme from &lt;code&gt;layouts/posts&lt;/code&gt; to &lt;code&gt;layouts/blog&lt;/code&gt; - however a much simpler solution exists. We can use the &lt;code&gt;type&lt;/code&gt; front matter setting to tell Hugo what layout to use to render it.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-yml&#34; data-lang=&#34;yml&#34;&gt;---
&lt;span style=&#34;color:#ff79c6&#34;&gt;date&lt;/span&gt;: 2020-03-10
&lt;span style=&#34;color:#ff79c6&#34;&gt;title&lt;/span&gt;: &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;Who Goes Blogging 3.2: Deployment Methods - GitHub Actions&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#ff79c6&#34;&gt;description&lt;/span&gt;: Migrating to GitHub Actions as our CI tool
&lt;span style=&#34;display:block;width:100%;background-color:#3d3f4a&#34;&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;type&lt;/span&gt;: posts
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;# ...&lt;/span&gt;
---&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;Hugo &lt;a href=&#34;https://gohugo.io/content-management/front-matter&#34;&gt;front matter&lt;/a&gt; are content parameter settings you place into the heading of the content - an example of this is right above!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Having to define this in every new article can become repetitive. We can make this easier for ourselves by using &lt;a href=&#34;https://gohugo.io/content-management/archetypes/&#34;&gt;archetypes&lt;/a&gt;; which are essentially templates that new content is templated from.&lt;/p&gt;
&lt;p&gt;In your project root directory, create the &lt;code&gt;archetypes/blog&lt;/code&gt; directory and in there a file called &lt;code&gt;index.md&lt;/code&gt;, and populate it with the below:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-yml&#34; data-lang=&#34;yml&#34;&gt;---
&lt;span style=&#34;color:#ff79c6&#34;&gt;draft&lt;/span&gt;: &lt;span style=&#34;color:#ff79c6&#34;&gt;true&lt;/span&gt;
&lt;span style=&#34;color:#ff79c6&#34;&gt;type&lt;/span&gt;: posts
&lt;span style=&#34;color:#6272a4&#34;&gt;# ...       Add in other defaults as you see fit&lt;/span&gt;
---
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You can then create new content from this template like so:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;$ hugo new --kind blog blog/blog-post 
/home/jdheyburn/projects/jdheyburn.co.uk/content/blog/blog-post created
 
$ tree content/blog/blog-post         
content/blog/blog-post
└── index.md

&lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt; directories, &lt;span style=&#34;color:#bd93f9&#34;&gt;1&lt;/span&gt; file

$ cat content/blog/blog-post/index.md 
---
draft: &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;true&lt;/span&gt;
type: posts
&lt;span style=&#34;color:#6272a4&#34;&gt;# ...&lt;/span&gt;
---
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;fixing-existing-urls&#34;&gt;Fixing Existing URLs&lt;/h3&gt;
&lt;p&gt;Changing the section the article is in affects the URL too; meaning articles will appear at &lt;code&gt;https://jdheyburn.co.uk/blog/blog-bootstrap/&lt;/code&gt; instead of &lt;code&gt;https://jdheyburn.co.uk/posts/blog-bootstrap/&lt;/code&gt;. Therefore existing hyperlinks pointing to these articles will break.&lt;/p&gt;
&lt;p&gt;Tnere is another quick fix available for us through the front matter setting &lt;code&gt;aliases&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-yml&#34; data-lang=&#34;yml&#34;&gt;---
&lt;span style=&#34;color:#ff79c6&#34;&gt;date&lt;/span&gt;: 2020-03-10
&lt;span style=&#34;color:#ff79c6&#34;&gt;title&lt;/span&gt;: &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;Who Goes Blogging 3.2: Deployment Methods - GitHub Actions&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#ff79c6&#34;&gt;description&lt;/span&gt;: Migrating to GitHub Actions as our CI tool
&lt;span style=&#34;color:#ff79c6&#34;&gt;type&lt;/span&gt;: posts
&lt;span style=&#34;display:block;width:100%;background-color:#3d3f4a&#34;&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;aliases&lt;/span&gt;:
&lt;/span&gt;&lt;span style=&#34;display:block;width:100%;background-color:#3d3f4a&#34;&gt;    - /posts/who-goes-blogging-3-2-deployment-methods-github-actions/
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;# ...&lt;/span&gt;
---&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You can read more about how &lt;code&gt;aliases&lt;/code&gt; does its operations &lt;a href=&#34;https://gohugo.io/content-management/urls/#aliases&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&#34;from-blogs-to-blog&#34;&gt;From Blogs to Blog&lt;/h3&gt;
&lt;p&gt;Earlier on, we came across this weird bug&amp;hellip;&lt;/p&gt;
&lt;figure&gt;&lt;a href=&#34;blogs-landing-page.png&#34;&gt;
    &lt;img src=&#34;https://jdheyburn.co.uk/blog/who-goes-blogging-4-content-structure-and-refactoring/blogs-landing-page.png&#34;
         alt=&#34;Screenshot of Blog landing page with incorrect Blogs title&#34;/&gt; &lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;This is occurring because of the translation feature of Hugo (sourced from &lt;a href=&#34;https://gohugo.io/functions/i18n/&#34;&gt;i18n&lt;/a&gt;) which converts singular word titles to plural on content section landing pages, since Hugo is listing them out. This made sense when our previous section name was posts, but now we&amp;rsquo;d rather it have say blog.&lt;/p&gt;
&lt;p&gt;Remembering that &lt;code&gt;content/blog&lt;/code&gt; is a &lt;a href=&#34;https://gohugo.io/content-management/page-bundles/#branch-bundles&#34;&gt;branch bundle&lt;/a&gt;, we can override the inferred title with a &lt;code&gt;_index.md&lt;/code&gt; file at that directory.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;# content/blog/_index.md&lt;/span&gt;
---
title: Blog
type: posts
---
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;We have another &lt;code&gt;type: posts&lt;/code&gt; setting here because similar to above, we want Hugo to render the landing page the same as we did for posts.&lt;/p&gt;
&lt;h3 id=&#34;heading-to-blog&#34;&gt;Heading to Blog&lt;/h3&gt;
&lt;p&gt;Lastly and most easily, the &lt;strong&gt;Blog&lt;/strong&gt; shortcut at the top-right corner of the page still directs us to &lt;code&gt;/posts&lt;/code&gt; - we need to change that in the top-level &lt;code&gt;config.toml&lt;/code&gt; to point to &lt;code&gt;/blog&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-toml&#34; data-lang=&#34;toml&#34;&gt;[[languages.en.menu.main]]
name = &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;Blog&amp;#34;&lt;/span&gt;
weight = &lt;span style=&#34;color:#bd93f9&#34;&gt;2&lt;/span&gt;
url = &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;/blog/&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Thanks for reading!&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>